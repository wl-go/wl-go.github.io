<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Intent | wlgo 博客</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://wl-go.github.io/favicon.ico?v=1610091133064">
<link rel="stylesheet" href="https://wl-go.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="
Intent 简介
创建 Intent

组件名称
操作 action
数据 data
类别 category
附加信息 extra
标志 flag


接收隐式Intent
待定 PendingIntent
常见Intent

Inte..." />
    <meta name="keywords" content="Android" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://wl-go.github.io">
        <img src="https://wl-go.github.io/images/avatar.png?v=1610091133064" class="site-logo">
        <h1 class="site-title">wlgo 博客</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      记录学习中的点点滴滴！
    </div>
    <div class="site-footer">
       | <a class="rss" href="https://wl-go.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Intent</h2>
            <div class="post-date">2021-01-08</div>
            
            <div class="post-content" v-pre>
              <ul>
<li><a href="#intent-%E7%AE%80%E4%BB%8B">Intent 简介</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA-intent">创建 Intent</a>
<ul>
<li><a href="#%E7%BB%84%E4%BB%B6%E5%90%8D%E7%A7%B0">组件名称</a></li>
<li><a href="#%E6%93%8D%E4%BD%9C-action">操作 action</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE-data">数据 data</a></li>
<li><a href="#%E7%B1%BB%E5%88%AB-category">类别 category</a></li>
<li><a href="#%E9%99%84%E5%8A%A0%E4%BF%A1%E6%81%AF-extra">附加信息 extra</a></li>
<li><a href="#%E6%A0%87%E5%BF%97-flag">标志 flag</a></li>
</ul>
</li>
<li><a href="#%E6%8E%A5%E6%94%B6%E9%9A%90%E5%BC%8Fintent">接收隐式Intent</a></li>
<li><a href="#%E5%BE%85%E5%AE%9A-pendingintent">待定 PendingIntent</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81intent">常见Intent</a></li>
</ul>
<h1 id="intent-简介">Intent 简介</h1>
<p>Intent 作为<code>消息传递对象</code>，可作为<code>组件之间的通信</code>，其分为<code>显示</code>、<code>隐式</code>类型</p>
<ul>
<li>显示：通过提供目标应用的软件包名称或完全限定的组件类名来指定可处理 Intent 的应用</li>
<li>隐式：不会指定特定的组件，而是声明要执行的常规操作<code>Action</code>，从而允许其他应用中的组件来处理</li>
</ul>
<p>基本用法：</p>
<ol>
<li>启动Activity</li>
<li>启动服务</li>
<li>传递广播</li>
</ol>
<h1 id="创建-intent">创建 Intent</h1>
<blockquote>
<p>Intent 主要包含一下这些内容：<code>组件名称</code>、<code>action</code>、<code>data</code>、<code>category</code>、<code>extra</code>、<code>flag</code></p>
</blockquote>
<h2 id="组件名称">组件名称</h2>
<blockquote>
<p>要启动的组件名称，构建<code>显式 Intent</code> 的一项重要信息，这意味着 Intent 应当仅传递给由组件名称定义的应用组件。**如果没有组件名称，则 Intent 则为隐式，**且系统将根据其他 Intent 信息（例如，以下所述的操作、数据和类别）决定哪个组件应当接收 Intent。</p>
<p>Intent 的这一字段是 ComponentName 对象，可以使用目标组件的<code>完全限定类名指定此对象</code>，其中包括应用的软件包名称，可以使用 <code>setComponent()</code>、<code>setClass()</code>、<code>setClassName()</code>，或 Intent 构造函数设置组件名称</p>
</blockquote>
<h2 id="操作-action">操作 action</h2>
<blockquote>
<p>指定要执行的通用操作的字符串<br>
指定自己的操作，供 Intent 在应用内使用（或者供其他应用在您的应用中调用组件）。但是，通常应该使用由Intent 类或其他框架类定义的<code>操作常量</code><br>
有关更多定义通用操作的常量，请参阅 Intent 类参考文档，<a href="https://developer.android.google.cn/reference/android/content/Intent#standard-activity-actions">Intent</a> ，<a href="https://developer.android.google.cn/reference/android/provider/Settings#ACTION_ACCESSIBILITY_SETTINGS">Settings 操作常量</a></p>
<p>可以使用 <code>setAction()</code> 或 Intent <code>构造函数</code>为 Intent 指定操作、<code>&lt;action&gt;</code></p>
<p><strong>如果定义自己的操作，请确保加入应用的软件包名称作为前缀</strong></p>
</blockquote>
<h2 id="数据-data">数据 data</h2>
<blockquote>
<p>引用待操作数据和/或该数据 MIME 类型的 <code>URI</code>（Uri 对象）。提供的数据类型通常由 Intent 的操作决定<br>
创建 Intent 时，除了指定 URI 以外，指定<code>数据类型</code>（其 MIME 类型）往往也很重要。例如，能够显示图像的 Activity 可能无法播放音频文件，即便 URI 格式十分类似时也是如此。因此，指定数据的 MIME 类型有助于 Android 系统找到接收 Intent 的最佳组件</p>
<p>要<code>仅设置数据 URI</code>，请调用 <code>setData()</code>。要<code>仅设置 MIME 类型</code>，请调用 <code>setType()</code>，如有必要，可以使用 <code>setDataAndType()</code>同时显式设置二者。</p>
<p><strong><code>注意</code></strong>：若要<code>同时设置 URI 和 MIME 类型</code>，<code>请勿</code>调用 setData() 和 setType()，因为它们会互相抵消彼此的值。请<code>始终使用 setDataAndType() 同时设置 URI 和 MIME 类型</code><br>
<code>&lt;data&gt;</code></p>
</blockquote>
<h2 id="类别-category">类别 category</h2>
<blockquote>
<p>一个包含应处理 Intent 组件类型的附加信息的字符串，<code>可以将任意数量的类别描述</code>放入一个 Intent 中，以下是一些常见类别：<a href="https://developer.android.google.cn/reference/android/content/Intent#standard-categories">常见类别</a></p>
<p>可以使用 <code>addCategory()</code> 指定类别、<code>&lt;category&gt;</code></p>
</blockquote>
<h2 id="附加信息-extra">附加信息 extra</h2>
<blockquote>
<p>携带完成请求操作所需的<code>附加信息的键值对</code>，正如某些操作使用特定类型的数据 URI 一样，有些操作也使用特定的 extra<br>
可以使用各种 <code>putExtra()</code> 方法添加 extra 数据，每种方法均接受两个参数：键名和值，还可以创建一个包含所有 extra 数据的 <code>Bundle 对象</code>，然后使用 <code>putExtras()</code>将 Bundle 插入 Intent 中</p>
<p><a href="https://developer.android.google.cn/reference/android/content/Intent#standard-extra-data">Intent 类将为标准化的数据类型指定多个 EXTRA_* 常量</a></p>
<p>如需声明自己的 extra 键（对于应用接收的 Intent），<code>请确保将应用的软件包名称作为前缀</code></p>
<p><code>注意：</code>在发送希望另一个应用接收的 Intent 时，请勿使用 <code>Parcelable</code> 或 <code>Serializable</code> 数据。如果某个应用尝试访问 Bundle 对象中的数据，但没有对打包或序列化类的访问权限，则系统将提出一个 RuntimeException。</p>
</blockquote>
<h2 id="标志-flag">标志 flag</h2>
<blockquote>
<p><code>标志</code>在 Intent 类中定义，充当 Intent 的<code>元数据</code>。标志可以<code>指示 Android 系统如何启动 Activity（例如，Activity 应属于哪个任务），以及启动之后如何处理</code>（例如，Activity 是否属于最近的 Activity 列表）<br>
<code>setFlags()</code>，<a href="https://developer.android.google.cn/reference/android/content/Intent#setFlags(int)">flag文档</a></p>
</blockquote>
<h1 id="接收隐式intent">接收隐式Intent</h1>
<blockquote>
<p>要接收哪些<code>隐式 Intent</code>，在清单文件中使用 <code>&lt;intent-filter&gt;</code> 元素为每个应用组件声明<code>一个或多个 Intent 过滤器</code>。每个 Intent 过滤器均根据 Intent 的<code>操作</code>、<code>数据</code>和<code>类别</code>指定自身接受的 Intent 类型。仅当隐式 Intent 可以通过 Intent 过滤器之一传递时，系统才会将该 Intent 传递给应用组件。<br>
应用组件应当为自身可执行的<code>每个独特作业声明单独的过滤器</code>。例如，图像库应用中的一个 Activity 可能会有两个过滤器，分别用于查看图像和编辑图像。当 Activity 启动时，将检查 Intent 并根据 Intent 中的信息决定具体的行为（例如，是否显示编辑器控件）。</p>
<p>每个 Intent 过滤器均由应用清单文件中的 <code>&lt;intent-filter&gt;</code> 元素定义，并嵌套在相应的应用组件（例如，<activity> 元素）中。在<code>&lt;intent-filter&gt; 内部</code>，可以使用以下三个元素中的<code>一个或多个</code>指定要接受的 Intent 类型：</p>
<p><code>&lt;action&gt;</code> 在 name 属性中，声明接受的 Intent 操作。该值必须是操作的文本字符串值，而不是类常量。<br>
<code>&lt;data&gt;</code> 使用<code>一个或多个</code>指定<code>数据 URI</code>（scheme、host、port、path）各个方面和 <code>MIME 类型的属性</code>，声明接受的数据类型。<br>
<code>&lt;category&gt;</code> 在 name 属性中，声明接受的 Intent 类别。该值必须是操作的文本字符串值，而不是类常量。</p>
<p><code>注意：</code>要接收隐式 Intent，必须将 <code>CATEGORY_DEFAULT 类别</code>包括在 Intent 过滤器中。方法 startActivity() 和 startActivityForResult() 将按照其声明 CATEGORY_DEFAULT 类别的方式处理所有 Intent。如果未在 Intent 过滤器中声明此类别，则隐式 Intent 不会解析为您的 Activity。</p>
<p>可以创建一个包括多个 <action>、<data> 或 <category> 实例的过滤器。创建时，需确定组件能够处理这些过滤器元素的任何及所有组合。</p>
<p>系统通过将 Intent 与所有这三个元素<code>进行比较</code>，根据过滤器测试隐式 Intent。隐式 Intent 若要传递给组件，<code>必须通过所有这三项测试</code>。如果 Intent 甚至无法匹配其中任何一项测试，则 Android 系统不会将其传递给组件。但是，由于一个组件可能有多个 Intent 过滤器，因此未能通过某一组件过滤器的 Intent 可能会通过另一过滤器。</p>
<p><code>注意：</code> 使用 Intent 过滤器时，无法安全地防止其他应用启动组件。尽管 Intent 过滤器将组件限制为仅响应特定类型的隐式 Intent，但如果开发者确定您的组件名称，则其他应用有可能通过使用显式 Intent 启动您的应用组件。如果必须确保只有您自己的应用才能启动您的某一组件，请勿在您的清单中声明 Intent 过滤器。而是将<code>该组件的 exported 属性设置为 &quot;false&quot;。</code></p>
</blockquote>
<h1 id="待定-pendingintent">待定 PendingIntent</h1>
<blockquote>
<p>PendingIntent 对象是 Intent 对象的包装器。PendingIntent 的主要目的是授权外部应用使用包含的 Intent，就像是它从您应用本身的进程中执行的一样。</p>
<p>待定 Intent 的主要用例包括：</p>
<ol>
<li>声明用户使用通知执行操作时所要执行的 Intent（Android 系统的 NotificationManager 执行 Intent）。</li>
<li>声明用户使用应用微件执行操作时要执行的 Intent（主屏幕应用执行 Intent）。</li>
<li>声明未来某一特定时间要执行的 Intent（Android 系统的 <code>AlarmManager 执行 Intent</code>）</li>
</ol>
<p>由于每个 Intent 对象均设计为由特定类型的应用组件进行处理（Activity、Service 或 BroadcastReceiver），因此还必须基于相同的考虑因素创建 PendingIntent。使用待定 Intent 时，应用不会使用调用（如 startActivity()）执行该 Intent。相反，通过调用相应的创建器方法创建 PendingIntent 时，必须声明所需的<code>组件类型：</code></p>
<ol>
<li><code>PendingIntent.getActivity()</code>，适用于启动 Activity 的 Intent</li>
<li><code>PendingIntent.getService()</code>，适用于启动 Service 的 Intent</li>
<li><code>PendingIntent.getBroadcast()</code>，适用于启动 BroadcastReceiver 的 Intent。</li>
</ol>
</blockquote>
<h1 id="常见intent">常见Intent</h1>
<p><a href="https://developer.android.google.cn/guide/components/intents-common">文档</a></p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://wl-go.github.io/tag/pkTceeoKE/" class="tag">
                    Android
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://wl-go.github.io/post/android-guang-bo/">
                  <h3 class="post-title">
                    Android广播
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
